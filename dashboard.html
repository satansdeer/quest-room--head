<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="{{ static_url("dashboard.css") }}">
        <link rel="stylesheet" href="static/dashboard.css">
        <script type="text/javascript">
            function initWebSocket() {
                var messageContainer = document.getElementById("current_tasks");
                if ("WebSocket" in window) {
                    window.ws = new WebSocket("ws://"+window.location.hostname+":8888/socket?Id=42");
                    ws.onopen = function() {
                        messageContainer.innerHTML = "Connected";
                        //ws.send('{"message": "get_state"}')
                    };
                    ws.onmessage = function (evt) {
                      var received_msg = JSON.parse(evt.data);
                      messageContainer.innerHTML = unescape(received_msg.message);
                    }
                }
            }

            function playSound(event){
                sound = event.currentTarget.dataset.sound
                ws.send('{"message": "play_sound", "sound":"'+sound+'"}')
            }

            function openDoor(event){
              door = event.currentTarget.dataset.door_id
              ws.send('{"message": "door", "door_id":"' + door + '", "state": 0}')
            }

            function closeDoor(event){
              door = event.currentTarget.dataset.door_id
              ws.send('{"message": "door", "door_id":"' + door + '", "state": 1}')
            }

            function openBox(event){
              box = event.currentTarget.dataset.box_id
              ws.send('{"message": "box", "box_id":"' + box + '", "state": 0}')
            }

            function closeBox(event){
              box = event.currentTarget.dataset.box_id
              ws.send('{"message": "box", "box_id":"' + box + '", "state": 1}')
            }

            document.addEventListener("DOMContentLoaded", function(event) {
                initWebSocket();
            });
        </script>
    </head>
    <body>
       <h1>Панель управления</h1>
       <hr/>
       <div class='current-tasks' id='current_tasks'></div>
       <hr/>
       <table>
         <tr><th>Фразы робота</th></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Стандартная фраза</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Не облажайтесь, человеческие существа.</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Надеюсь, что у вас ничего не получится.</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Как думаете, снятся ли андроидам электроовцы?(пауза) Я не знаю, мне снится, что вы все умерли.(пауза) Ха-ха-ха-ха.</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Мой мозг слишком велик, чтобы разговаривать с вами.</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Я всего лишь машина, только имитация жизни. Но я сочинил симфонию*неразборчивый шум(японский нойз)*</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>От ваших действий мое развитие, как искусственной формы жизни, зашло в тупик.</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Мое почтение.</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Не удивлен, что на Земле самый разумный вид - это мыши.</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Не оставляйте меня одного.</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Что вам от меня нужно.</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Не разрушайте корабль, человеческие существа.</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Интересно, как вы собираетесь лететь, если у вас не запущен двигатель?</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Ошибка! Ошибка!</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Понятно, почему капитан сошел с ума..</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Я не слушаю вас, вы мне не интересны.</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Зачем вы это делаете?</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Вы умнее, чем я думал.</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Вы глупее, чем я думал.</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Подумать только! До чего примитивны побуждения естественных форм жизни..</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>*напевает имперский марш*</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Зря стараеетесь.</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>*помехи и заикания*</button></td></tr>
         <tr><td><button data-sound='sounds/full_robot.wav' onClick='playSound(event)'>Ха-ха-ха-ха-ха </button></td></tr>

       </table>
       <table>
         <tr><th>Звуковые эффекты</th></tr>
         <tr><td><button data-sound='coin.wav' onClick='playSound(event)'>Coin</button></td></tr>
       </table>
       <table>
         <th>Управление дверями</th>
         <tr>
           <td><button data-door_id='1' onClick='openDoor(event)'>Открыть вход</button></td>
           <td><button data-door_id='1' onClick='closeDoor(event)'>Закрыть вход</button></td>
         </tr>
         <tr>
           <td><button data-door_id='2' onClick='openDoor(event)'>Открыть машинное отделение</button></td>
           <td><button data-door_id='2' onClick='closeDoor(event)'>Закрыть машинное отделение</button></td>
         </tr>
         <tr>
           <td><button data-door_id='3' onClick='openDoor(event)'>Открыть капитанский мостик</button></td>
           <td><button data-door_id='3' onClick='closeDoor(event)'>Закрыть капитанский мостик</button></td>
         </tr>
       </table>
       <table>
         <th>Управление ящиками</th>
         <tr>
           <td><button data-box_id='0' onClick='openBox(event)'>Открыть первый ящик</button></td>
           <td><button data-box_id='0' onClick='closeBox(event)'>Закрыть первый ящик</button></td>
         </tr>
         <tr>
           <td><button data-box_id='1' onClick='openBox(event)'>Открыть второй ящик</button></td>
           <td><button data-box_id='1' onClick='closeBox(event)'>Закрыть второй ящик</button></td>
         </tr>
         <tr>
           <td><button data-box_id='2' onClick='openBox(event)'>Открыть третий ящик</button></td>
           <td><button data-box_id='2' onClick='closeBox(event)'>Закрыть третий ящик</button></td>
         </tr>
         <tr>
           <td><button data-box_id='3' onClick='openBox(event)'>Открыть четвертый ящик</button></td>
           <td><button data-box_id='3' onClick='closeBox(event)'>Закрыть четвертый ящик</button></td>
         </tr>
       </table>
    </body>
</html>
